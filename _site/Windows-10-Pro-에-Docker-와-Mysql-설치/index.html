<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="Ohjongsung's Dev Story" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="Ohjongsung's Dev Story" /> <title> Windows 10 Pro 에 Docker 와 Mysql 설치 - Ohjongsung's Dev Story </title> <link rel="alternate" href="http://localhost:4000/Windows-10-Pro-%EC%97%90-Docker-%EC%99%80-Mysql-%EC%84%A4%EC%B9%98/" hreflang="en-US" /> <link rel="canonical" href="http://localhost:4000/Windows-10-Pro-%EC%97%90-Docker-%EC%99%80-Mysql-%EC%84%A4%EC%B9%98/" /> <meta name="description" content="개발 블로그입니다. @github." /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="Windows 10 Pro 에 Docker 와 Mysql 설치 | Ohjongsung's Dev Story" /> <meta property="og:title" content="Windows 10 Pro 에 Docker 와 Mysql 설치 | Ohjongsung's Dev Story" /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/Windows-10-Pro-%EC%97%90-Docker-%EC%99%80-Mysql-%EC%84%A4%EC%B9%98/" /> <meta property="og:description" content="개발 블로그입니다. @github." /> <meta property="og:image" content="http://localhost:4000/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Windows 10 Pro 에 Docker 와 Mysql 설치 | " /> <meta name="twitter:url" content="http://localhost:4000/Windows-10-Pro-%EC%97%90-Docker-%EC%99%80-Mysql-%EC%84%A4%EC%B9%98/" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:description" content="개발 블로그입니다. @github." /> <meta name="twitter:image" content="http://localhost:4000/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ohjongsung's Dev Story" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="light" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"><a class="menu-link" href="/">home</a><a class="menu-link" href="/archive/">archive</a><a class="menu-link" href="https://github.com/ohjongsung" target="_blank" rel="noopener" >github</a ><a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <h1 class="header-title" itemprop="headline">Windows 10 Pro 에 Docker 와 Mysql 설치</h1> <div class="post-meta"> <time datetime="2018-11-25T00:00:00+09:00" itemprop="datePublished"> 2018-11-25 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Ohjongsung's Dev Story</span> </span> <time hidden datetime="" itemprop="dateModified"> Nov 25, 2018 </time> <span hidden itemprop="publisher" itemtype="Person">Ohjongsung's Dev Story</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p>윈도우 10 Pro에 도커를 설치하고 mysql 컨테이너를 뛰워보자. 먼저 알아둬야 하는 점은 윈도우 10 Home 이하 버전과 윈도우 10 Pro 이상, 즉 윈도우 서버와 같은 환경은 설치 방법이 다르다는 것이다. 그래서 자신의 윈도우 환경이 10 Home 이하인 경우, 이 글을 더 이상 읽지 말고, Docker Tool Box 설치 방법을 찾아 보길 바란다.</p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p>윈도우 10 Pro에 도커를 설치하고 mysql 컨테이너를 뛰워보자. 먼저 알아둬야 하는 점은 윈도우 10 Home 이하 버전과 윈도우 10 Pro 이상, 즉 윈도우 서버와 같은 환경은 설치 방법이 다르다는 것이다. 그래서 자신의 윈도우 환경이 10 Home 이하인 경우, 이 글을 더 이상 읽지 말고, Docker Tool Box 설치 방법을 찾아 보길 바란다.</p> <h2 id="윈도우-10-pro에-docker-설치"> <a href="#윈도우-10-pro에-docker-설치" class="anchor-head"></a> 윈도우 10 Pro에 Docker 설치 </h2> <h4 id="가상화-여부-확인"> <a href="#가상화-여부-확인" class="anchor-head"></a> 가상화 여부 확인 </h4> <p>윈도우 작업 관리자 성능 탭에서 CPU 정보의 가상화 사용 여부를 확인하자. 사용안함인 경우, 컴퓨터 부팅 시, Bios 세팅에 접근해서 가상화 기능을 활성화 시켜야 한다.</p> <h4 id="hyper-v-활성화"> <a href="#hyper-v-활성화" class="anchor-head"></a> Hyper-V 활성화 </h4> <p>제어판 - Windows 기능 화면에서 Hyper-V 기능을 키고, 재시작을 하자.</p> <h4 id="docker-installer-download"> <a href="#docker-installer-download" class="anchor-head"></a> Docker installer Download </h4> <p><a href="https://docs.docker.com/">Link</a> 에서 상단 메뉴 Get Docker -&gt; Windows -&gt; Download for Windows 로 가면 인스톨 파일을 다운로드 할 수 있다. 하지만, 아직 가입을 하지 않았다면, 다운로드 링크가 보이지 않는다. 먼저 가입을 하고 다운로드 하던가 아니면 <a href="https://download.docker.com/win/stable/Docker%20for%20Windows%20Installer.exe">Docker for Windows Installer.exe</a> 로 다운받자. 물론, 어찌하든 회원가입은 해야한다.</p> <p>다운로드한 파일을 설치하면, 윈도우 로그아웃 -&gt; 재 로그인을 진행하게 되고 작업표시줄 트레이 아이콘을 보면 도커가 실행되고 있음이 확인된다. 설치 중 선택 항목에 Windows container 또는 Linux container 를 고르는 부분이 있는데, 나는 Linux로 진행했다. 설치 후에도 변경이 가능하다.</p> <h4 id="kitematic-설치"> <a href="#kitematic-설치" class="anchor-head"></a> Kitematic 설치 </h4> <p>도커가 설치되면 Kitematic를 설치해야 한다. Kitematic은 도커를 관리 할수 있는 GUI툴이다. 작업 표시줄 트레이 아이콘에서 도커 아이콘을 우클릭해서 kitematic 메뉴를 클리하자. 그러면 Zip 파일을 다운받게 되는데, 요것을 도커가 설치된 폴더에 압축 풀어주자. 이제 Kitematic 을 통해서 도커를 관리하거나, Kitematic 화면 좌측 아래의 Docker CLI 를 클릭해서 윈도우 파워쉘을 사용해서 관리할 수 있다.</p> <h4 id="disk-image-위치-변경"> <a href="#disk-image-위치-변경" class="anchor-head"></a> Disk Image 위치 변경 </h4> <p>도커 Settings 메뉴의 Advadnced 항목을 보면 Disk image location 정보가 있다. 기본 세팅은 아래와 같을 것이다.</p> <blockquote> <p>C:\Users\Public\Documents\Hyper-V\Virtual Hard Disks\MobyLinuxVM.vhdx</p> </blockquote> <p>이렇게 기본 세팅을 두고 작업을 하면 C 드라이브의 용량이 부족해지는 순간이 올 것이다. 그래서 좀 더 여유가 있는 보조 드라이브로 옮겨보자. 참고로 인터넷 검색을 통해 찾은 여러 방법들을 시도 해보았지만, 다 실패했다. 도커의 세팅 변경으로는 제대로 먹혀들지 않았다. 그러다 Hyper-V 자체의 기본 가상 하드 디스크 경로를 변경하니 원하는데로 작동했다. 방법은 간단하다.</p> <ul> <li>실행 중인 도커 종료</li> <li>Hyper-V 관리자 -&gt; 내컴퓨터 선택 -&gt; 우클릭 -&gt; Hyper-V 설정(s) 클릭 후, 가상 하드 디스크, 가상 컴퓨터 항목을 원하는 위치로 변경</li> <li>도커 실행</li> <li>변경한 위치에 MobyLinuxVM.vhdx 생성됨을 확인</li> </ul> <h2 id="docker에-mysql-설치"> <a href="#docker에-mysql-설치" class="anchor-head"></a> Docker에 Mysql 설치 </h2> <p>Docker 의 Kitematic 을 열고 좌측 하단의 Docker CLI 를 클릭해서 윈도우 파워쉘로 진행하겠다.</p> <h4 id="mysql-docker-image-조회"> <a href="#mysql-docker-image-조회" class="anchor-head"></a> Mysql Docker Image 조회 </h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker search mysql
</code></pre></div></div> <h4 id="mysql-docker-image-download"> <a href="#mysql-docker-image-download" class="anchor-head"></a> Mysql Docker Image Download </h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull mysql
</code></pre></div></div> <h4 id="mysql-docker-image-확인"> <a href="#mysql-docker-image-확인" class="anchor-head"></a> Mysql Docker Image 확인 </h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker images
</code></pre></div></div> <h4 id="mysql-docker-container-생성"> <a href="#mysql-docker-container-생성" class="anchor-head"></a> Mysql Docker container 생성 </h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-d</span> <span class="nt">-p</span> 3306:3306 <span class="nt">-e</span> <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>password <span class="nt">--name</span> mysql_sample mysql
</code></pre></div></div> <ul> <li>-p 3306:3306 : 호스트의 3306포트와 컨테이너의 3306포트를 연결한다. 즉 호스트에서 3306포트에 접근하면 해당 컨테이너에 접속 된다.</li> <li>-e MYSQL_ROOT_PASSWORD=password : 컨테이너를 생성하면서 환경변수를 지정한다. root계정의 비밀번호를 설정한다.</li> <li>-name mysql_sample : 컨테이너의 이름은 mysql_sample 로 지정한다.</li> </ul> <h4 id="mysql-docker-container-동작-확인"> <a href="#mysql-docker-container-동작-확인" class="anchor-head"></a> Mysql Docker container 동작 확인 </h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker ps <span class="nt">-a</span>
</code></pre></div></div> <h4 id="윈도우-파워쉘에서-mysql-container-접속"> <a href="#윈도우-파워쉘에서-mysql-container-접속" class="anchor-head"></a> 윈도우 파워쉘에서 Mysql Container 접속 </h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">exec</span> <span class="nt">-i</span> <span class="nt">-t</span> mysql_sample bash
</code></pre></div></div> <h4 id="mysql-접속"> <a href="#mysql-접속" class="anchor-head"></a> Mysql 접속 </h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-u</span> root <span class="nt">-p</span>
</code></pre></div></div> <h4 id="mysql-클라이언트로-접속"> <a href="#mysql-클라이언트로-접속" class="anchor-head"></a> Mysql 클라이언트로 접속 </h4> <p>Mysql workbench 나 HeidiSQL 과 같은 Mysql 클라이언트로 접속을 시도하면, 다음과 같은 에러를 보게 된다.</p> <blockquote> <p>Authentication plugin ‘caching_sha2_password’ cannot be loaded:… 또는 Unable to load authentication plugin ‘caching_sha2_password’.</p> </blockquote> <p>이는 Mysql8 버전에서 사용하는 계정 비밀번호 암호화를 클라이언트가 지원하지 않아서 생기는 문제다. 다시 앞서 설명한 방법으로 Mysql에 접속해서 root 계정의 비밀번호 암호를 다음과 같이 바꿔주자.</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">'root'</span> <span class="n">IDENTIFIED</span> <span class="k">WITH</span> <span class="n">mysql_native_password</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span>
</code></pre></div></div> <p>다시 접속을 시도하면 잘 될 것이다.</p> <h2 id="reference"> <a href="#reference" class="anchor-head"></a> Reference </h2> <ul> <li>https://blog.hanumoka.net/2018/04/28/docker-20180428-windows10pro-install-docker/</li> <li>https://blog.hanumoka.net/2018/04/29/docker-20180429-docker-install-mysql/</li> <li>https://blog.frankfu.com.au/2018/03/09/change-dockers-default-storage-directory-for-images/</li> <li>https://github.com/docker/for-win/issues/2063</li> <li>https://stackoverflow.com/questions/49019652/not-able-to-connect-to-mysql-docker-from-local</li> </ul> </div> </article> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/%EC%B9%B4%EC%9A%B0%EC%B9%98%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EB%8B%A4%EC%B0%A8%EC%9B%90-%EC%8A%A4%EC%BC%80%EC%9D%BC%EB%A7%81-Couchbase-Multidimesional-Scaling/" > <div class="nav-arrow">Previous</div> <span class="post-title">카우치베이스 다차원 스케일링 Couchbase Multidimesional Scaling</span> </a> <a class="post-nav-item post-nav-next" href="/NoSQL%EC%97%90%EC%84%9C-%EC%8A%A4%ED%82%A4%EB%A7%88-%EB%B3%80%EA%B2%BD%EA%B3%BC-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98/"> <div class="nav-arrow">Next</div> <span class="post-title">Nosql에서 스키마 변경과 마이그레이션</span> </a> </nav> <footer class="footer"> <!--<a class="footer_item" href="/thanks">ack.</a> <a class="footer_item" href="javascript::void(0)">resume</a>--> <a class="footer_item" href="/feed.xml">rss</a> <span class="footer_item">&copy; 2022</span> <small class="footer_copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a > theme on <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a > </small> </footer> <script src="/assets/js/main.js" defer="defer"></script> </div> </body> </html>
