<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="Ohjongsung's Dev Story" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="Ohjongsung's Dev Story" /> <title> 자바 캐스팅 Java Casting - Ohjongsung's Dev Story </title> <link rel="alternate" href="http://localhost:4000/%EC%9E%90%EB%B0%94-%EC%BA%90%EC%8A%A4%ED%8C%85-Java-Casting/" hreflang="en-US" /> <link rel="canonical" href="http://localhost:4000/%EC%9E%90%EB%B0%94-%EC%BA%90%EC%8A%A4%ED%8C%85-Java-Casting/" /> <meta name="description" content="개발 블로그입니다. @github." /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="자바 캐스팅 Java Casting | Ohjongsung's Dev Story" /> <meta property="og:title" content="자바 캐스팅 Java Casting | Ohjongsung's Dev Story" /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/%EC%9E%90%EB%B0%94-%EC%BA%90%EC%8A%A4%ED%8C%85-Java-Casting/" /> <meta property="og:description" content="개발 블로그입니다. @github." /> <meta property="og:image" content="http://localhost:4000/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="자바 캐스팅 Java Casting | " /> <meta name="twitter:url" content="http://localhost:4000/%EC%9E%90%EB%B0%94-%EC%BA%90%EC%8A%A4%ED%8C%85-Java-Casting/" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:description" content="개발 블로그입니다. @github." /> <meta name="twitter:image" content="http://localhost:4000/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ohjongsung's Dev Story" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="light" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"><a class="menu-link" href="/">home</a><a class="menu-link" href="/archive/">archive</a><a class="menu-link" href="https://github.com/ohjongsung" target="_blank" rel="noopener" >github</a ><a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <h1 class="header-title" itemprop="headline">자바 캐스팅 Java Casting</h1> <div class="post-meta"> <time datetime="2018-05-30T00:00:00+09:00" itemprop="datePublished"> 2018-05-30 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Ohjongsung's Dev Story</span> </span> <time hidden datetime="" itemprop="dateModified"> May 30, 2018 </time> <span hidden itemprop="publisher" itemtype="Person">Ohjongsung's Dev Story</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p>형변환이라 부르기도 하는 Casting은 기본형과 참조형에서 사용가능하다. 같은 종류의 변수끼리 Casting이 가능하고 기본형과 참조형 간의 Casting은 불가능하다. Casting은 단순히 데이터 형을 바꾸는 목적이 아니라, OOP의 특성인 다형성측면에서 활용한다.</p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p>형변환이라 부르기도 하는 Casting은 기본형과 참조형에서 사용가능하다. 같은 종류의 변수끼리 Casting이 가능하고 기본형과 참조형 간의 Casting은 불가능하다. Casting은 단순히 데이터 형을 바꾸는 목적이 아니라, OOP의 특성인 다형성측면에서 활용한다.</p> <h2 id="casting"> <a href="#casting" class="anchor-head"></a> Casting </h2> <p>기본적인 형변환에 대해 기본형 데이터로 알아보자.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Casting</span> <span class="o">{</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">intType</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="kt">double</span> <span class="n">doubleType</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">;</span>
         
        <span class="c1">//암시적 캐스팅</span>
        <span class="n">doubleType</span> <span class="o">=</span> <span class="n">intType</span><span class="o">;</span>
 
         <span class="c1">// 컴파일 에러</span>
         <span class="c1">// intType = doulbeType;</span>

        <span class="c1">//명시적 캐스팅</span>
        <span class="n">intType</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span><span class="n">doubleType</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>컴파일러는 기본형 데이터의 크기를 알고 있다. 작은 범위에서 큰 범위로 형변환을 할 때, 데이터 손실이 발생하지 않는다는 것을 안다. 그래서 캐스트 연산자를 명시적으로 작성할 필요가 없고, 컴파일러가 알아서 형변환을 해주면서 컴파일 에러도 발생시키지 않는다. 반대로, 큰 범위의 double 자료형에서 int 자료형으로 형변환을 시도할 경우, 컴파일러는 데이타 손실을 우려하기 때문에 컴파일 에러를 발생시킨다. 하지만, 개발자가 데이터가 손실된 다는 것을 알고 있음에도 형변환을 하고자 할때, 캐스팅 연산자를 명시적으로 작성하는 것이다.</p> <p><strong>즉, 변수에 값을 넣을 때, 해당 자료형에 딱 맞게 정보를 넣어줘야 한다.</strong></p> <h2 id="upcasting"> <a href="#upcasting" class="anchor-head"></a> UpCasting </h2> <p>Casting 은 서로 관련있는 데이터형끼리만 변환이 가능하다. boolean 자료형과 int 자료형간의 형변환은 일어날 수 없다. 참조형 데이터 역시 마찬가지다. 상손관계, 인터페이스 구현으로 관련 여부가 판단된다.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span><span class="o">{</span>
  <span class="c1">// doSometing...  </span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AudiCar</span> <span class="kd">extends</span> <span class="nc">Car</span><span class="o">{</span>
  <span class="c1">// doSometing...  </span>
<span class="o">}</span>
</code></pre></div></div> <p>요런 단순한 상속 구조의 클래스가 있다.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Car</span> <span class="n">justCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Car</span><span class="o">();</span>
</code></pre></div></div> <p>Car 데이터 형에 Car 인스턴스를 생성한다. 앞서 설명한데로, Car 의 정보를 모두 가지고 있으므로 문제가 없다.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Car</span> <span class="n">implicitCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AudiCar</span><span class="o">();</span>
</code></pre></div></div> <p>Car 데이터 형에 AudiCar 인스턴스를 생성한다. AudiCar는 Car 를 상속한 클래스로써 Car 의 모든 정보를 가지고 있다. 따라서 오류가 발생하지 않는다. 이렇게 사용해도 되지만, 데이터 형이 다르므로 아래와 같이 명시적으로 캐스팅 연산자를 작성해주는게 좋다.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Car</span> <span class="n">explicitCar</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Car</span><span class="o">)</span> <span class="k">new</span> <span class="nc">AudiCar</span><span class="o">();</span>
</code></pre></div></div> <p>앞선 글에서 int 자료형에 double 자료형의 값을 넣을 때 값 손실이 일어남을 봤다. 그렇다면 Car 자료형에 AudiCar 객체를 생성하면 AudiCar의 고유 정보를 잃어버리는 것일까? 그렇지 않다. 그저 AudiCar 의 특성이 가려지는 것이다. 그래서 이를 되돌리는 Casting이 있다.</p> <h2 id="downcasting"> <a href="#downcasting" class="anchor-head"></a> DownCasting </h2> <p>부모 자료형으로 형변환하는 것을 UpCasting이라 하고 그것을 다시 되돌리는 것을 DownCasting이라 한다. DownCasting은 명시적으로 타입을 항상 지정해줘야 한다.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Car</span> <span class="n">implicitCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AudiCar</span><span class="o">();</span>
<span class="nc">AudiCar</span> <span class="n">audiCar</span> <span class="o">=</span> <span class="o">(</span><span class="nc">AudiCar</span><span class="o">)</span> <span class="n">implicitCar</span><span class="o">;</span>
</code></pre></div></div> <p>DownCasting은 쉽게 성립하는 문법이 아니다. 상단의 코드처럼 처음 Car 인스턴스를 생성할 때, AudiCar 로 생성했기 때문에 DownCasting이 가능한 것이다. UpCasting 된 변수가 가리키는 객체의 진짜 타입은 어떻게 구분할까?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Car</span> <span class="n">implicitCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AudiCar</span><span class="o">();</span>

<span class="k">if</span> <span class="o">(</span><span class="n">implicitCar</span> <span class="k">instanceof</span> <span class="nc">AudiCar</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">AudiCar</span> <span class="n">audiCar</span> <span class="o">=</span> <span class="o">(</span><span class="nc">AudiCar</span><span class="o">)</span> <span class="n">implicitCar</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>레퍼런스가 어떤 객체의 타입인지 구별하기 위해서 instanceof 키워드를 이용한다.</strong></p> <h2 id="언제-사용하나"> <a href="#언제-사용하나" class="anchor-head"></a> 언제 사용하나? </h2> <p>AudiCar 뿐만아니라 BMWCar, BentzCar 등 많은 자식 객체가 생성되었다. 그런데 부모 클래스 Car의 정보와 기능만 필요할 때 UpCasting을 사용한다.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Car</span><span class="o">&gt;</span> <span class="n">cars</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

 <span class="n">cars</span><span class="o">.</span><span class="na">stream</span><span class="o">()...</span>
</code></pre></div></div> <p>따로 따로 모든 자식 클래스의 인스턴스를 처리는 것보다 UpCasting을 통해 Car 로 묶어서 처리하는게 편하다. 코드를 보면 심지어 List 를 생성할 때도 UpCasting을 사용하고 있다. 우리는 알게 모르게 UpCasting을 사용하고 있는 것이다. 반대로, UpCasting 된 자료형이지만, 자식 자료형의 고유 기능을 사용하고 싶을 때, DownCasting을 사용한다. 말로 설명하기 힘든데, 실제 개발을 하다보면 이해가 될 것이다.</p> <h2 id="reference"> <a href="#reference" class="anchor-head"></a> Reference </h2> <ul> <li>http://mommoo.tistory.com/40?category=577684</li> <li>http://inor.tistory.com/40</li> <li>https://blog.naver.com/premiummina/220601833463</li> </ul> </div> </article> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/Optional-orElse-%EC%99%80-orElseGet-%EC%9D%98-%EC%B0%A8%EC%9D%B4/" > <div class="nav-arrow">Previous</div> <span class="post-title">Optional Orelse 와 Orelseget 의 차이</span> </a> <a class="post-nav-item post-nav-next" href="/REST-API-%EA%B8%B0%EB%B3%B8-%EC%A0%95%EB%A6%AC/"> <div class="nav-arrow">Next</div> <span class="post-title">Rest api 기본 정리</span> </a> </nav> <footer class="footer"> <!--<a class="footer_item" href="/thanks">ack.</a> <a class="footer_item" href="javascript::void(0)">resume</a>--> <a class="footer_item" href="/feed.xml">rss</a> <span class="footer_item">&copy; 2022</span> <small class="footer_copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a > theme on <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a > </small> </footer> <script src="/assets/js/main.js" defer="defer"></script> </div> </body> </html>
