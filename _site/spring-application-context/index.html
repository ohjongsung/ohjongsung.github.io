<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="Ohjongsung's Dev Story" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="Ohjongsung's Dev Story" /> <title> Spring Application Context - Ohjongsung's Dev Story </title> <link rel="alternate" href="http://localhost:4000/spring-application-context/" hreflang="en-US" /> <link rel="canonical" href="http://localhost:4000/spring-application-context/" /> <meta name="description" content="개발 블로그입니다. @github." /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="Spring Application Context | Ohjongsung's Dev Story" /> <meta property="og:title" content="Spring Application Context | Ohjongsung's Dev Story" /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/spring-application-context/" /> <meta property="og:description" content="개발 블로그입니다. @github." /> <meta property="og:image" content="http://localhost:4000/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Spring Application Context | " /> <meta name="twitter:url" content="http://localhost:4000/spring-application-context/" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:description" content="개발 블로그입니다. @github." /> <meta name="twitter:image" content="http://localhost:4000/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ohjongsung's Dev Story" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="light" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"><a class="menu-link" href="/">home</a><a class="menu-link" href="/archive/">archive</a><a class="menu-link" href="https://github.com/ohjongsung" target="_blank" rel="noopener" >github</a ><a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <h1 class="header-title" itemprop="headline">Spring Application Context</h1> <div class="post-meta"> <time datetime="2017-06-03T00:00:00+09:00" itemprop="datePublished"> 2017-06-03 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Ohjongsung's Dev Story</span> </span> <time hidden datetime="" itemprop="dateModified"> Jun 03, 2017 </time> <span hidden itemprop="publisher" itemtype="Person">Ohjongsung's Dev Story</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p>스프링 애플리케이션에서는 독립된 컨테이너가 오브젝트에 대한 제어권을 가지고 있다. 그래서 IOC 컨테이너라고 부른다. 그런데 이 컨테이너를 빈 팩토리 또는 애플리케이션 컨텍스트라고도 부른다. 왜 그렇게 부르는지 소스를 살펴보자.</p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p>스프링 애플리케이션에서는 독립된 컨테이너가 오브젝트에 대한 제어권을 가지고 있다. 그래서 IOC 컨테이너라고 부른다. 그런데 이 컨테이너를 빈 팩토리 또는 애플리케이션 컨텍스트라고도 부른다. 왜 그렇게 부르는지 소스를 살펴보자.</p> <h4 id="applicationcontext-interface"> <a href="#applicationcontext-interface" class="anchor-head"></a> ApplicationContext interface </h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ApplicationContext</span> <span class="kd">extends</span> <span class="nc">EnvironmentCapable</span><span class="o">,</span> <span class="nc">ListableBeanFactory</span>
<span class="o">,</span> <span class="nc">HierarchicalBeanFactory</span><span class="o">,</span> <span class="nc">MessageSource</span><span class="o">,</span> <span class="nc">ApplicationEventPublisher</span><span class="o">,</span> <span class="nc">ResourcePatternResolver</span> <span class="o">{</span>
</code></pre></div></div> <p>우리가 말하는 IOC 컨테이너는 ApplicationContext 인터페이스를 구현한 클래스의 오브젝트이다. 그런데 소스를 보면 ApplicationContext 인터페이스는 BeanFactory 인터페이스의 서브 인터페이스인 ListableBeanFactory, HierarchicalBeanFactory를 상속하고 있다. 즉 애플리케이션 컨텍스트가 IOC 컨테이너이자 빈 팩토리이며, 그 이상의 기능을 가졌다고 볼 수 있다.</p> <h2 id="계층구조-컨텍스트"> <a href="#계층구조-컨텍스트" class="anchor-head"></a> 계층구조 컨텍스트 </h2> <p>스프링 프로젝트에서 일반적으로 ApplicationContext를 부모 컨텍스트인 RootContext와 자식 컨텍스트인 ServletContext 나눠서 계층 구조로 만든다. 계층구조 안의 모든 컨텍스트는 각자 독립적인 설정정보를 이용해 빈 오브젝트를 만들고 관리한다. 계층구조 컨텍스트의 특징은 다음과 같다.</p> <h4 id="계층구조-컨텍스트의-특징"> <a href="#계층구조-컨텍스트의-특징" class="anchor-head"></a> 계층구조 컨텍스트의 특징 </h4> <ul> <li>자식 컨텍스트는 자신이 관리하는 빈에서 필요한 빈이 없는 경우, 부모 컨텍스트의 빈까지 검색한다. 부모 컨텍스트에서 원하는 빈이 없다면, 부모의 부모 컨텍스트를 거쳐 최상위 루트 컨텍스트까지 원하는 빈을 검색한다.</li> <li>어디까지나 자신의 부모 컨텍스트에게만 빈 검색을 요청할 수 있다. 자식 컨텍스트에게는 요청할 수 없다. 또한 형제 컨텍스트의 빈도 검색할 수 없다.</li> <li>부모 컨텍스트와 같은 이름의 빈을 정의해서 가지고 있다면 자신이 가진 빈을 우선해서 사용한다. 즉, 부모 컨텍스트가 정의한 것은 무시된다.</li> <li>하나의 컨텍스트에서 설정된 AOP는 다른 컨텍스트에 등록된 빈에 영향을 미치지 않는다.</li> </ul> <h4 id="애플리케이션-컨텍스트에-빈-오브젝트를-등록"> <a href="#애플리케이션-컨텍스트에-빈-오브젝트를-등록" class="anchor-head"></a> 애플리케이션 컨텍스트에 빈 오브젝트를 등록 </h4> <p>일반적으로 서블릿 컨텍스트에선 @Controller 빈을 스캔해서 등록하고, 루트 컨텍스트에선 그 외 나머지 빈을 등록하도록 스캔을 설정한다.</p> <h4 id="rootcontext-configuration"> <a href="#rootcontext-configuration" class="anchor-head"></a> RootContext Configuration </h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span><span class="s">"io.ohjongsung.template"</span><span class="o">}</span>
<span class="o">,</span><span class="n">excludeFilters</span> <span class="o">=</span> <span class="nd">@ComponentScan</span><span class="o">.</span><span class="na">Filter</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="nc">Controller</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">ANNOTATION</span><span class="o">))</span>
</code></pre></div></div> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">"io.ohjongsung.template"</span><span class="nt">&gt;</span>
<span class="nt">&lt;context:exclude-filter</span> <span class="na">type=</span><span class="s">"annotation"</span> <span class="na">expression=</span><span class="s">"org.springframework.stereotype.Controller"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/context:component-scan&gt;</span>
</code></pre></div></div> <h4 id="servletcontext-configuration"> <a href="#servletcontext-configuration" class="anchor-head"></a> ServletContext Configuration </h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ComponentScan</span><span class="o">({</span> <span class="s">"io.ohjongsung.template"</span> <span class="o">}</span>
<span class="o">,</span><span class="n">includeFilters</span> <span class="o">=</span> <span class="nd">@ComponentScan</span><span class="o">.</span><span class="na">Filter</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="nc">Controller</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">ANNOTATION</span><span class="o">))</span>
</code></pre></div></div> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">"io.ohjongsung.template"</span> <span class="na">use-default-filters=</span><span class="s">"false"</span><span class="nt">&gt;</span>
<span class="nt">&lt;context:include-filter</span> <span class="na">type=</span><span class="s">"annotation"</span> <span class="na">expression=</span><span class="s">"org.springframework.stereotype.Controller"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/context:component-scan&gt;</span>
</code></pre></div></div> <h2 id="왜-계층구조를-이용할까"> <a href="#왜-계층구조를-이용할까" class="anchor-head"></a> 왜 계층구조를 이용할까? </h2> <p>사실 스프링은 하나의 컨텍스트에 모든 설정을 다 할수 있고, 컨텍스트를 나눠놓고 componetScan을 한쪽에서만 한다던가 부모 자식 컨텍스트가 모든 빈을 중복 스캔하게 설정할 수 있다. 계층구조 컨텍스트의 특징을 잘 이해하고 설정한다면 이런 방식도 큰 문제가 없다. 그런데 왜 계층구조를 이용할까?</p> <p>계층구조는 애플리케이션 구조에 대한 파악과 설정을 편하게 한다. 기존 설정을 수정하지 않고 사용하지만 일부 빈 구성을 바꾸고 싶은 경우, 애플리케이션 컨텍스트를 계층구조로 만들면 편하다. 자식 컨텍스트를 생성하고 바꾸고 싶은 빈을 다시 설정하면 된다. 이해가 안된다면, 계층구조 컨텍스트의 특징을 다시 읽어보자. 또 다른 이유는 여러 컨텍스트가 공유하는 설정을 만들기 위해서이다. 애플리케이션 안에 성격이 다른 설정으로 분리해서 여러 컨텍스트를 구성하고 이 컨텍스트들의 부모 컨텍스트를 만들어서 공통 설정은 공유하게 만들 수 있다.</p> <h2 id="aop-설정-주의사항"> <a href="#aop-설정-주의사항" class="anchor-head"></a> AOP 설정 주의사항 </h2> <p>스프링 AOP는 데코레이터 패턴 또는 프록시 패턴을 응용해서, 기존 코드에 영향을 주지 않고 부가기능을 타깃 오브젝트에 제공할 수 있는 객체지향 프로그래밍 모델이다. 이는 여러 오브젝트에 필요한 공통적인 기능을 손쉽게 개발하고 적용할 수 있다. 그렇다면, 부모 컨텍스트에 등록된 빈에 AOP를 적용했는데 이 빈을 자식 컨텍스트에서 다시 스캔해서 등록하면 어떻게 될까? 계층구조 컨텍스트의 특징 두 개를 다시 보자.</p> <ul> <li>하나의 컨텍스트에서 설정된 AOP는 다른 컨텍스트에 등록된 빈에 영향을 미치지 않는다.</li> <li>부모 컨텍스트와 같은 이름의 빈을 정의해서 가지고 있다면 자신이 가진 빈을 우선해서 사용한다. 즉, 부모 컨텍스트가 정의한 것은 무시된다.</li> </ul> <p>위의 두 특징에 따르면, 부모 컨텍스트에 AOP를 적용해도 자식 컨텍스트가 같은 이름의 빈을 정의해서 가지고 있다면 AOP 설정은 무시된다. 그래서 자식 컨텍스트에서 빈을 이유없이 중복 등록하지 않는지 주의해야 하며, AOP 설정이 필요한 빈이 정의된 컨텍스트면 모두 설정 해야한다.</p> </div> </article> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/%ED%95%84%EB%93%9C-%EC%A3%BC%EC%9E%85%EC%9D%84-%ED%94%BC%ED%95%98%EC%9E%90/" > <div class="nav-arrow">Previous</div> <span class="post-title">필드 주입을 피하자</span> </a> <a class="post-nav-item post-nav-next" href="/Ubuntu-16.04.1-LTS%EC%97%90-Maria-DB-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/"> <div class="nav-arrow">Next</div> <span class="post-title">Ubuntu 16.04.1 Lts에 Maria Db 설치하기</span> </a> </nav> <footer class="footer"> <!--<a class="footer_item" href="/thanks">ack.</a> <a class="footer_item" href="javascript::void(0)">resume</a>--> <a class="footer_item" href="/feed.xml">rss</a> <span class="footer_item">&copy; 2022</span> <small class="footer_copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a > theme on <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a > </small> </footer> <script src="/assets/js/main.js" defer="defer"></script> </div> </body> </html>
